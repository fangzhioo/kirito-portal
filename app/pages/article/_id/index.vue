<template>
  <div id="article">
    <v-container fluid>
      <v-row>
        <v-col cols="11" class="mx-auto">
          <v-row>
            <v-col cols="12" sm="12" md="8" lg="8">
              <v-skeleton-loader type="card-avatar, article, actions" :loading="videoLoading" tile large>
                <v-responsive>
                  <section>
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Quibusdam nulla nihil molestiae
                    consectetur, doloribus eos tempora excepturi magni atque nostrum sequi iusto quod? Asperiores
                    voluptatem earum quia id nisi ipsum harum ad aliquam, veritatis voluptatibus esse minus modi
                    reiciendis corporis adipisci voluptatum cumque minima temporibus beatae! Harum ipsam pariatur quam
                    voluptate velit quia quod soluta ad voluptatibus possimus repellat id vel enim non mollitia ducimus,
                    ullam impedit. Excepturi perspiciatis quod maxime, dicta natus, nihil, iure adipisci repellat
                    provident exercitationem fugiat repudiandae voluptates. Inventore labore cumque ipsum aperiam sed,
                    reprehenderit deleniti delectus repellat quod, molestias reiciendis minus ullam placeat eum quae
                    provident autem? Vitae voluptates soluta tempore dolores atque molestiae, nisi, tenetur architecto
                    quasi minima et at, assumenda debitis nulla. Libero quidem ullam fuga sequi quis vel, numquam fugit
                    neque ipsam voluptate magni similique officiis, ab perferendis corporis porro. Fugiat possimus, non
                    sed illo, corrupti dolorum, molestias in at atque quisquam blanditiis obcaecati a hic tempore
                    tenetur soluta alias officia commodi error odio incidunt adipisci. Praesentium deserunt error sit,
                    tempora tenetur architecto nihil, hic facilis eligendi ipsa ullam, repudiandae magnam ab dolorum in
                    totam rem distinctio! Hic provident rem nulla labore veritatis aut repudiandae non repellendus,
                    sapiente aspernatur illum sint temporibus doloremque esse unde natus atque voluptates, fugiat quidem
                    obcaecati delectus quia! Deserunt, voluptatum recusandae explicabo placeat, ex eaque eveniet, beatae
                    porro aliquam error culpa possimus provident corporis facilis? Similique animi itaque, ad libero
                    unde velit dicta error! Quibusdam accusamus unde, aliquam culpa sit voluptate doloribus, magni, qui
                    repellat tempora distinctio dolore odio! Eius dolores temporibus sequi facere repellendus explicabo
                    molestias magnam. Dolores officia facere at obcaecati dolor quod quia consequuntur labore eos illum
                    ducimus nisi, id, voluptatibus officiis, sint repellat tempore cupiditate earum laborum vero
                    reprehenderit voluptatum. Quia doloremque reprehenderit excepturi exercitationem earum quaerat saepe
                    nemo necessitatibus rem ratione! Dolores, consequatur iure. Consectetur repudiandae vel, velit,
                    nostrum consequuntur iusto recusandae doloremque maiores aperiam eligendi dicta assumenda deleniti
                    reiciendis, rerum mollitia molestias enim hic. Temporibus consequuntur vero dolores placeat quam
                    tenetur sapiente, libero dicta soluta, officia vitae? Voluptate, porro? Ab cum sequi quos quas dolor
                    reprehenderit exercitationem fugit autem nostrum. Animi sint fugiat maiores expedita? Consectetur
                    maxime iusto doloremque temporibus a, fugiat quos porro quam ducimus rem rerum distinctio ea
                    quisquam at corrupti accusamus atque? Odio aut voluptate non aliquam tempora enim asperiores ut
                    omnis ratione perferendis, voluptatibus ullam cumque. Molestias ad eveniet omnis expedita aliquid
                    architecto voluptatibus doloremque explicabo aut? Quia veritatis laborum rem? Quod eveniet expedita
                    optio. Nam obcaecati aperiam exercitationem, quidem velit doloremque nihil ullam dolorem corrupti
                    numquam at eos! Accusantium nihil vel corporis eaque est distinctio iure in autem nobis, dolores
                    alias sed, aut et placeat eveniet minus iste officiis? Reiciendis quasi id temporibus optio pariatur
                    fugit mollitia deleniti maiores esse error doloribus autem laudantium, corporis ex recusandae,
                    doloremque exercitationem itaque illo repellat quos. Minima possimus laboriosam doloribus voluptatum
                    porro sit soluta, odio ipsam vero fugiat earum cupiditate ex praesentium quo animi magnam sed quia
                    sapiente eum! Amet doloribus beatae, officiis consectetur dolorum voluptates eos impedit accusamus.
                    Ab officia, eligendi cum fuga non excepturi! Porro error molestias cumque adipisci voluptatibus id
                    voluptas perspiciatis recusandae dolores velit iste repellendus explicabo tempora, inventore quae
                    laborum at quidem deleniti modi provident illo. Deserunt cumque aperiam doloribus perferendis illum,
                    explicabo esse ex ullam provident laudantium distinctio aspernatur amet error veritatis consequatur
                    omnis quidem. Dolores aut explicabo similique sit, maxime id eum incidunt officiis beatae ipsa,
                    exercitationem fugiat! Sapiente facere odit facilis quo nihil delectus! Vitae voluptatibus aperiam
                    vero! Dolorum ipsam asperiores iste? Qui rerum delectus aliquid nesciunt totam nobis perspiciatis
                    facere impedit aliquam sequi sint est illum, perferendis, omnis in veritatis labore natus dolores!
                    Possimus nemo, alias nostrum quos laborum a molestias mollitia totam quibusdam aperiam fugiat
                    necessitatibus assumenda eligendi natus impedit tempora quaerat vel ipsam, minima, molestiae dolores
                    culpa sint non numquam. Totam facilis numquam blanditiis laborum eligendi molestiae labore,
                    doloremque aperiam nam itaque excepturi, eaque fuga optio repudiandae culpa minima nobis minus
                    dolore assumenda sunt repellat inventore ullam. Nihil fugit vitae id ipsam itaque, impedit repellat
                    sed minus! Possimus vitae debitis voluptas soluta blanditiis sed accusamus molestiae impedit error
                    maxime tempora accusantium officiis ea quisquam voluptatem deleniti, id deserunt harum? Molestiae ex
                    iure alias! Omnis, inventore? Accusamus ipsam, error ea nesciunt, pariatur quidem qui libero fuga
                    adipisci provident non in incidunt voluptate odit at nisi dignissimos laborum voluptatibus?
                    Voluptatum earum fugit a quidem repellendus qui, vel fugiat debitis, optio eum iste consequuntur
                    alias eaque voluptates. Explicabo enim quas rem qui, ipsum corrupti dolores molestias. Doloribus
                    dolor aspernatur voluptas molestias at quod modi temporibus fugiat, error eligendi distinctio
                    dolore, nostrum sunt quia amet sed aut alias dolorem eius quae saepe! Distinctio perspiciatis
                    repellat repellendus laudantium? Officiis ab et ducimus consequuntur similique quaerat nobis
                    exercitationem voluptates illum unde minus repellendus deserunt id neque, quo, nisi repudiandae
                    ipsum ad ut ex libero, est delectus hic? Sequi provident officiis enim? Cumque beatae hic, minus
                    quae suscipit et repellendus laudantium neque tenetur obcaecati reprehenderit quis nemo adipisci
                    dolor dicta animi quam, vel sapiente alias quod impedit. Amet, dolorem! Neque iusto corrupti, sunt
                    nesciunt perferendis commodi fugiat exercitationem perspiciatis nam ad possimus nobis facilis
                    praesentium magnam illo ratione facere! Asperiores ipsum odit eaque dicta vitae aut provident minima
                    cum fuga facere sapiente laudantium nulla, cumque odio. Maxime debitis iure eos officia explicabo
                    esse modi possimus soluta blanditiis enim quibusdam tempore tenetur iste, aliquam a mollitia
                    ratione, alias natus, consequatur quod. Libero, laudantium itaque iste adipisci molestias ratione.
                    Illo omnis minus dolorum libero cumque qui animi, ratione quae quia aliquam amet possimus totam
                    dignissimos harum sed. Vero culpa non magnam possimus voluptate omnis accusamus eaque obcaecati
                    inventore dolorem qui incidunt sed ipsam fugiat atque quidem nobis odio, libero sint. Quis, tempore
                    ea qui perferendis minus corporis quaerat quia neque voluptate debitis maiores suscipit aliquam, ab,
                    quasi non laborum adipisci illum in quam cupiditate. Nostrum, omnis repellat! Modi libero excepturi
                    iste placeat, debitis cum error quis aspernatur illum dolor soluta ducimus totam possimus veritatis
                    provident eius sequi laboriosam earum. Ullam necessitatibus nisi sunt tenetur quam commodi eligendi.
                  </section>
                </v-responsive>
                <v-card flat tile class="card">
                  <v-card-title class="pl-0 pb-0">{{ video.title }}</v-card-title>
                  <div id="btns" class="d-flex flex-wrap justify-space-between">
                    <v-card-subtitle class="pl-0 pt-0 pb-0 subtitle-1" style="line-height: 2.4em;">
                      {{ video.views }} views<v-icon>mdi-circle-small</v-icon>{{ video.createdAt }}
                    </v-card-subtitle>
                    <v-card-actions class="pt-0 pl-0 grey--text">
                      <v-btn text><v-icon class="pr-2">mdi-thumb-up</v-icon> 1.5k</v-btn>
                      <v-btn text><v-icon class="pr-2">mdi-thumb-down</v-icon> 1.5k</v-btn>
                      <v-btn text><v-icon>mdi-share</v-icon> Share</v-btn>
                      <v-btn text><v-icon>mdi-playlist-plus</v-icon> Save</v-btn>
                    </v-card-actions>
                  </div>
                </v-card>

                <v-row class="justify-space-between">
                  <v-col cols="6" sm="6" md="5" lg="5">
                    <v-card class="transparent" flat>
                      <v-list-item three-line>
                        <v-list-item-avatar size="50"
                          ><v-img src="https://randomuser.me/api/portraits/men/1.jpg"></v-img
                        ></v-list-item-avatar>
                        <v-list-item-content class="align-self-auto">
                          <v-list-item-title class="font-weight-medium mb-1">Tech Reagan</v-list-item-title>
                          <v-list-item-subtitle>{{ video.subscribers }} subscribers </v-list-item-subtitle>
                        </v-list-item-content>
                      </v-list-item>
                    </v-card>
                  </v-col>
                  <v-col cols="6" sm="6" md="4" lg="4">
                    <div class="d-flex justify-end align-center">
                      <v-btn class="red white--text mt-6" tile large depressed>Subscribed</v-btn>
                      <v-btn icon class="ml-5 mt-6"><v-icon>mdi-bell</v-icon></v-btn>
                    </div>
                  </v-col>
                  <v-col class="pl-11" offset="1" cols="11" md="11">
                    <p>
                      {{ truncate ? truncateText(video.description, 150) : video.description }}
                    </p>
                    <v-btn text class="remove-hover-bg" @click="show">{{
                      `${truncate ? 'Show More' : 'Show Less'}`
                    }}</v-btn>
                  </v-col>
                  <v-col>
                    <p class="mb-0">148 Comments</p>
                    <input ref="hello" type="text" />
                    <v-card class="transparent" flat>
                      <v-list-item three-line class="pl-0">
                        <v-list-item-avatar size="50"
                          ><v-img src="https://randomuser.me/api/portraits/men/1.jpg"></v-img
                        ></v-list-item-avatar>
                        <v-list-item-content class="align-self-auto">
                          <v-text-field
                            v-model="comment"
                            placeholder="Add a public comment..."
                            @click="showCommentBtns = true"
                          >
                          </v-text-field>
                          <div v-if="showCommentBtns" class="d-inline-block text-right">
                            <v-btn text @click="showCommentBtns = !showCommentBtns">Cancel</v-btn>
                            <v-btn class="blue darken-3 white--text" depressed tile :disabled="comment === ''"
                              >Comment</v-btn
                            >
                          </div>
                        </v-list-item-content>
                      </v-list-item>
                    </v-card>

                    <v-card v-for="i in 5" :key="i" class="transparent" flat>
                      <v-list-item three-line class="pl-0 mt-2">
                        <v-list-item-avatar size="50"
                          ><v-img src="https://randomuser.me/api/portraits/men/1.jpg"></v-img
                        ></v-list-item-avatar>
                        <v-list-item-content>
                          <v-list-item-title class="font-weight-medium caption mb-1"
                            >Tech Reagan <span class="font-weight-light grey--text"> 1 day ago</span></v-list-item-title
                          >
                          <v-list-item-subtitle class="black--text text--darken-4 caption"
                            >Lorem ipsum, dolor sit amet consectetur adipisicing elit. Tempore deleniti aspernatur
                            nostrum eius dignissimos repellendus. Fugiat, aspernatur deserunt iusto natus consectetur
                            voluptatem voluptate laboriosam pariatur qui animi repudiandae quae
                            dolorem.</v-list-item-subtitle
                          >
                          <!-- <v-list-item-action> -->
                          <div>
                            <!-- <button
                              class="caption font-weight-bold d-inline-block pa-2 grey--text text--darken-3"
                              style="cursor: pointer; outline: none"
                              @click.stop.prevent="showReply"
                            >
                              REPLY
                            </button> -->
                            <v-btn text small :ripple="false" @click.stop="showReply(`${'reply' + i}`)">Reply</v-btn>
                          </div>
                          <div :ref="`${'reply' + i}`" class="d-none">
                            <v-list-item three-line class="pl-0">
                              <v-list-item-avatar class="mt-0" size="40"
                                ><v-img src="https://randomuser.me/api/portraits/men/1.jpg"></v-img
                              ></v-list-item-avatar>
                              <v-list-item-content class="align-self-auto mt-0 pt-0">
                                <v-form :ref="`form${i}`">
                                  <v-text-field
                                    :ref="`${'input' + i}`"
                                    class="pt-0 mt-0 body-2"
                                    placeholder="Add a public comment..."
                                    :value="repliesInput[`input${i}`]"
                                  >
                                  </v-text-field>
                                </v-form>
                                <div :ref="i + 'btns'" class="d-inline-block text-right">
                                  <v-btn text small @click="hideReply(i)">Cancel</v-btn>
                                  <v-btn class="blue darken-3 white--text" depressed tile small @click="addReply(i)"
                                    >Reply</v-btn
                                  >
                                </div>
                              </v-list-item-content>
                            </v-list-item>
                            <!-- </v-list-item-action> -->
                          </div>
                        </v-list-item-content>
                      </v-list-item>
                    </v-card>
                  </v-col>
                </v-row>
              </v-skeleton-loader>
            </v-col>

            <v-col cols="12" sm="12" md="4" lg="4">
              <hr class="grey--text" />
              <h4 class="mb-3 mt-3">Up next</h4>
              <div v-for="i in 10" :key="i" class="mb-5">
                <v-skeleton-loader class="mx-auto" type="list-item-avatar-three-line" :loading="loading" tile large>
                  <v-card class="card" tile flat>
                    <v-row no-gutters>
                      <v-col class="mx-auto" cols="3" sm="3" md="5" lg="5">
                        <!-- <v-responsive max-height="100%"> -->
                        <v-img class="align-center" src="https://cdn.vuetifyjs.com/images/cards/docks.jpg"> </v-img>
                        <!-- </v-responsive> -->
                      </v-col>
                      <v-col>
                        <div class="ml-2">
                          <v-card-title class="pl-2 pt-0 subtitle-1 font-weight-bold" style="line-height: 1;">
                            Top western road trips
                          </v-card-title>

                          <v-card-subtitle class="pl-2 pt-2 pb-0" style="line-height: 1;">
                            Tech Reagan<br />
                            9.6k views<v-icon>mdi-circle-small</v-icon>6 hours ago
                          </v-card-subtitle>
                        </div>
                      </v-col>
                    </v-row>
                  </v-card>
                </v-skeleton-loader>
              </div>
            </v-col>
          </v-row>
        </v-col>
      </v-row>
    </v-container>
  </div>
</template>

<script>
export default {
  data: () => ({
    loading: true,
    videoLoading: true,
    video: [],
    truncate: true,
    comment: '',
    showCommentBtns: false,
    repliesInput: {},
  }),
  mounted() {
    setTimeout(() => {
      this.loading = false;
      this.videoLoading = false;
      this.getVideos();
    }, 400);
  },

  methods: {
    getVideos() {
      const info = {
        channelName: 'Tech Reagan',
        subscribers: '100k',
        createdAt: '6 hours ago',
        views: '200,459',
        videoUrl: 'https://media.w3.org/2010/05/sintel/trailer.mp4',
        title: 'Attendance Management System',
        description:
          'Lorem, ipsum dolor sit amet consectetur adipisicing elit. Culpa vel inventore voluptatum reiciendis delectus quibusdam incidunt consequuntur, nostrum aperiam, natus quidem qui corrupti reprehenderit quaerat neque voluptatibus? Ullam, maiores temporibus!',
      };
      this.loading = true;
      this.videoLoading = true;
      new Promise(function (resolve) {
        setTimeout(() => {
          resolve(info);
        }, 1500);
      })
        .then((res) => {
          this.video = res;
        })
        .finally(() => {
          this.loading = false;
          this.videoLoading = false;
        });
    },
    showReply(id) {
      this.$refs[id][0].classList.toggle('d-none');
    },
    hideReply(id) {
      this.$refs[`form${id}`][0].reset();
      this.$refs['reply' + id][0].classList.toggle('d-none');
    },
    addReply(id) {
      this.$refs[`form${id}`][0].reset();
      console.log(this.$refs[`input${id}`][0].$refs.input.value);
    },
    show() {
      this.truncate = !this.truncate;
    },
    truncateText(string = '', num) {
      if (string.length <= num) {
        return string;
      }
      return string.slice(0, num);
    },
  },
};
</script>

<style lang="scss">
#watch {
  video {
    max-width: 100%;
    // min-height: 360px;

    /* width: 640px; height: 360px; */
  }
}

#btns {
  border-bottom: 1px solid #e0d8d8;
  button {
    color: #7f7f7f;
  }
}

button.v-btn.remove-hover-bg {
  background-color: initial !important;
  &:hover {
    background-color: #f9f9f9;
  }
}
</style>
